<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Smart Notes">
    <meta name="theme-color" content="#007bff">
    <meta name="format-detection" content="telephone=no">
    <title>导入笔记 - Smart Note Collector</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/mobile.css">

    <style>
        .color-picker-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .color-presets {
            display: flex;
            gap: 5px;
        }

        .color-preset {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }

        .color-preset:hover {
            transform: scale(1.1);
        }

        .color-preset.active {
            border-color: #333;
            transform: scale(1.2);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #333;
        }
    </style>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .import-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .import-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .import-header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .import-header p {
            color: #6c757d;
            font-size: 16px;
        }
        
        .import-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .import-method {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .import-method:hover {
            border-color: #007bff;
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.1);
        }
        
        .import-method.active {
            border-color: #007bff;
            background: #f8f9ff;
        }
        
        .import-method-icon {
            font-size: 48px;
            margin-bottom: 16px;
            color: #007bff;
        }
        
        .import-method-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .import-method-description {
            color: #6c757d;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .import-content {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .file-drop-zone {
            border: 2px dashed #dee2e6;
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .file-drop-zone.dragover {
            border-color: #007bff;
            background: #f8f9ff;
        }
        
        .file-drop-zone-icon {
            font-size: 48px;
            color: #6c757d;
            margin-bottom: 16px;
        }
        
        .file-drop-zone.dragover .file-drop-zone-icon {
            color: #007bff;
        }
        
        .file-input {
            display: none;
        }
        
        .import-progress {
            display: none;
            margin-top: 20px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #007bff, #0056b3);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .import-results {
            display: none;
            margin-top: 20px;
        }
        
        .result-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
        }
        
        .result-item.success {
            background: #d4edda;
            color: #155724;
        }
        
        .result-item.error {
            background: #f8d7da;
            color: #721c24;
        }
        
        .result-item.warning {
            background: #fff3cd;
            color: #856404;
        }
        
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 100;
        }
        
        .back-button:hover {
            border-color: #007bff;
            color: #007bff;
        }
        
        @media (max-width: 768px) {
            .import-container {
                padding: 10px;
            }
            
            .import-methods {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .import-method {
                padding: 20px;
            }
            
            .import-method-icon {
                font-size: 40px;
            }
            
            .file-drop-zone {
                padding: 30px 15px;
            }
            
            .file-drop-zone-icon {
                font-size: 40px;
            }
        }
    </style>
</head>
<body>
    <div class="import-container">
        <!-- 返回按钮 -->
        <button class="back-button" onclick="window.history.back()">
            <i class="fas fa-arrow-left"></i>
        </button>
        
        <!-- 导入头部 -->
        <div class="import-header">
            <h1><i class="fas fa-file-import"></i> 导入笔记</h1>
            <p>支持多种格式的笔记文件导入，让您轻松迁移现有笔记</p>
        </div>
        
        <!-- 导入方式选择 -->
        <div class="import-methods">
            <div class="import-method active" data-method="file">
                <div class="import-method-icon">
                    <i class="fas fa-file-upload"></i>
                </div>
                <div class="import-method-title">文件导入</div>
                <div class="import-method-description">
                    支持 TXT、MD、JSON 等格式的单个或批量文件导入
                </div>
            </div>
            
            <div class="import-method" data-method="text">
                <div class="import-method-icon">
                    <i class="fas fa-clipboard"></i>
                </div>
                <div class="import-method-title">文本导入</div>
                <div class="import-method-description">
                    直接粘贴文本内容，快速创建笔记
                </div>
            </div>
            
            <div class="import-method" data-method="url">
                <div class="import-method-icon">
                    <i class="fas fa-link"></i>
                </div>
                <div class="import-method-title">URL导入</div>
                <div class="import-method-description">
                    从网页URL提取内容并创建笔记
                </div>
            </div>
        </div>
        
        <!-- 导入内容区域 -->
        <div class="import-content">
            <!-- 文件导入 -->
            <div id="file-import" class="import-section">
                <div class="file-drop-zone" onclick="document.getElementById('fileInput').click()">
                    <div class="file-drop-zone-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <h3>拖拽文件到此处或点击选择</h3>
                    <p>支持 .txt, .md, .json 格式，最大 10MB</p>
                    <input type="file" id="fileInput" class="file-input" multiple accept=".txt,.md,.json">
                </div>
                
                <div class="selected-files" id="selectedFiles"></div>
                
                <div class="form-group" style="margin-top: 20px;">
                    <label class="form-label">导入到主题：</label>
                    <select id="importTheme" class="form-control">
                        <option value="">选择主题...</option>
                        <option value="__new__">+ 新建主题</option>
                    </select>
                </div>

                <!-- 新建主题输入框 -->
                <div class="form-group" id="newThemeGroup" style="display: none;">
                    <label class="form-label">新主题名称：</label>
                    <input type="text" id="newThemeName" class="form-control" placeholder="输入新主题名称">
                    <div class="form-group" style="margin-top: 10px;">
                        <label class="form-label">主题颜色：</label>
                        <div class="color-picker-group">
                            <input type="color" id="newThemeColor" class="form-control" value="#3498db" style="width: 60px; height: 40px; padding: 0; border: none;">
                            <div class="color-presets">
                                <span class="color-preset" data-color="#3498db" style="background: #3498db;" title="蓝色"></span>
                                <span class="color-preset" data-color="#e74c3c" style="background: #e74c3c;" title="红色"></span>
                                <span class="color-preset" data-color="#2ecc71" style="background: #2ecc71;" title="绿色"></span>
                                <span class="color-preset" data-color="#f39c12" style="background: #f39c12;" title="橙色"></span>
                                <span class="color-preset" data-color="#9b59b6" style="background: #9b59b6;" title="紫色"></span>
                                <span class="color-preset" data-color="#1abc9c" style="background: #1abc9c;" title="青色"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <input type="checkbox" id="useOriginalTheme">
                        按原文件主题分类导入（若无该主题则自动新建）
                    </label>
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <input type="checkbox" id="enableThemeChange">
                        启用更改主题选项
                    </label>
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <input type="checkbox" id="createNewTheme">
                        为每个文件创建新主题
                    </label>
                </div>
                
                <button id="startImport" class="btn btn-primary" style="width: 100%; margin-top: 20px;" disabled>
                    <i class="fas fa-play"></i> 开始导入
                </button>
            </div>
            
            <!-- 文本导入 -->
            <div id="text-import" class="import-section" style="display: none;">
                <div class="form-group">
                    <label class="form-label">笔记标题：</label>
                    <input type="text" id="textTitle" class="form-control" placeholder="输入笔记标题">
                </div>
                
                <div class="form-group">
                    <label class="form-label">笔记内容：</label>
                    <textarea id="textContent" class="form-control" rows="10" placeholder="粘贴或输入笔记内容"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">选择主题：</label>
                    <select id="textTheme" class="form-control">
                        <option value="">选择主题...</option>
                        <option value="__new__">+ 新建主题</option>
                    </select>
                </div>

                <!-- 文本导入新建主题输入框 -->
                <div class="form-group" id="textNewThemeGroup" style="display: none;">
                    <label class="form-label">新主题名称：</label>
                    <input type="text" id="textNewThemeName" class="form-control" placeholder="输入新主题名称">
                    <div class="form-group" style="margin-top: 10px;">
                        <label class="form-label">主题颜色：</label>
                        <div class="color-picker-group">
                            <input type="color" id="textNewThemeColor" class="form-control" value="#2ecc71" style="width: 60px; height: 40px; padding: 0; border: none;">
                            <div class="color-presets">
                                <span class="color-preset" data-color="#3498db" style="background: #3498db;" title="蓝色"></span>
                                <span class="color-preset" data-color="#e74c3c" style="background: #e74c3c;" title="红色"></span>
                                <span class="color-preset" data-color="#2ecc71" style="background: #2ecc71;" title="绿色"></span>
                                <span class="color-preset" data-color="#f39c12" style="background: #f39c12;" title="橙色"></span>
                                <span class="color-preset" data-color="#9b59b6" style="background: #9b59b6;" title="紫色"></span>
                                <span class="color-preset" data-color="#1abc9c" style="background: #1abc9c;" title="青色"></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">标签（用逗号分隔）：</label>
                    <input type="text" id="textTags" class="form-control" placeholder="标签1, 标签2, 标签3">
                </div>
                
                <button id="importText" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-plus"></i> 创建笔记
                </button>
            </div>
            
            <!-- URL导入 -->
            <div id="url-import" class="import-section" style="display: none;">
                <div class="form-group">
                    <label class="form-label">网页URL：</label>
                    <input type="url" id="urlInput" class="form-control" placeholder="https://example.com">
                </div>
                
                <div class="form-group">
                    <label class="form-label">选择主题：</label>
                    <select id="urlTheme" class="form-control">
                        <option value="">选择主题...</option>
                        <option value="__new__">+ 新建主题</option>
                    </select>
                </div>

                <!-- URL导入新建主题输入框 -->
                <div class="form-group" id="urlNewThemeGroup" style="display: none;">
                    <label class="form-label">新主题名称：</label>
                    <input type="text" id="urlNewThemeName" class="form-control" placeholder="输入新主题名称">
                    <div class="form-group" style="margin-top: 10px;">
                        <label class="form-label">主题颜色：</label>
                        <div class="color-picker-group">
                            <input type="color" id="urlNewThemeColor" class="form-control" value="#f39c12" style="width: 60px; height: 40px; padding: 0; border: none;">
                            <div class="color-presets">
                                <span class="color-preset" data-color="#3498db" style="background: #3498db;" title="蓝色"></span>
                                <span class="color-preset" data-color="#e74c3c" style="background: #e74c3c;" title="红色"></span>
                                <span class="color-preset" data-color="#2ecc71" style="background: #2ecc71;" title="绿色"></span>
                                <span class="color-preset" data-color="#f39c12" style="background: #f39c12;" title="橙色"></span>
                                <span class="color-preset" data-color="#9b59b6" style="background: #9b59b6;" title="紫色"></span>
                                <span class="color-preset" data-color="#1abc9c" style="background: #1abc9c;" title="青色"></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button id="importUrl" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-download"></i> 导入网页内容
                </button>
            </div>
            
            <!-- 导入进度 -->
            <div class="import-progress" id="importProgress">
                <h4>导入进度</h4>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">准备导入...</div>
            </div>
            
            <!-- 导入结果 -->
            <div class="import-results" id="importResults">
                <h4>导入结果</h4>
                <div id="resultsList"></div>
                <button class="btn btn-secondary" onclick="resetImport()" style="margin-top: 16px;">
                    <i class="fas fa-redo"></i> 重新导入
                </button>
            </div>
        </div>
    </div>
    
    <!-- Toast 通知 -->
    <div class="toast-container" id="toastContainer"></div>
    
    <!-- JavaScript -->
    <script src="js/api.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/themes.js"></script>
    <script src="js/mobile.js"></script>
    <script src="js/import.js"></script>
</body>
</html>
